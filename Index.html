<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Expense Tracker | Login</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
*{
  box-sizing:border-box;
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;
}
body{
  margin:0;
  height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
  background:linear-gradient(-45deg,#1e1b4b,#312e81,#4c1d95,#020617);
  background-size:400% 400%;
  animation:bgMove 12s ease infinite;
  color:#fff;
  overflow:hidden;
}
@keyframes bgMove{
  0%{background-position:0% 50%}
  50%{background-position:100% 50%}
  100%{background-position:0% 50%}
}

/* CARD */
.card{
  width:100%;
  max-width:360px;
  padding:28px;
  border-radius:24px;
  background:rgba(255,255,255,.08);
  backdrop-filter:blur(20px);
  box-shadow:0 30px 70px rgba(0,0,0,.5);
  animation:enter .8s cubic-bezier(.2,.8,.2,1);
}
@keyframes enter{
  from{opacity:0;transform:translateY(40px) scale(.95)}
  to{opacity:1;transform:none}
}

.logo{
  font-size:26px;
  font-weight:800;
  text-align:center;
  margin-bottom:6px;
}
.sub{
  text-align:center;
  font-size:14px;
  color:#c7d2fe;
  margin-bottom:24px;
}

input{
  width:100%;
  padding:14px;
  border-radius:14px;
  border:none;
  margin-bottom:14px;
  font-size:15px;
  outline:none;
  transition:.2s;
}
input:focus{
  box-shadow:0 0 0 2px #818cf8;
}

/* PASSWORD */
.wrap{position:relative}
.toggle{
  position:absolute;
  right:14px;
  top:14px;
  font-size:13px;
  color:#a5b4fc;
  cursor:pointer;
}

.forgot{
  text-align:right;
  font-size:13px;
  color:#a5b4fc;
  margin-bottom:18px;
  cursor:pointer;
}

/* BUTTON */
.btn{
  width:100%;
  padding:14px;
  border:none;
  border-radius:999px;
  font-size:16px;
  font-weight:700;
  cursor:pointer;
  transition:.15s;
}
.btn:active{transform:scale(.97)}
.primary{
  background:linear-gradient(135deg,#6366f1,#8b5cf6);
  color:#fff;
  box-shadow:0 12px 30px rgba(99,102,241,.6);
}
.secondary{
  margin-top:12px;
  background:rgba(255,255,255,.18);
  color:#fff;
}

/* LOADING */
.spinner{
  width:18px;height:18px;
  border:2px solid rgba(255,255,255,.4);
  border-top-color:#fff;
  border-radius:50%;
  animation:spin .8s linear infinite;
  display:none;
  margin:auto;
}
@keyframes spin{to{transform:rotate(360deg)}}

.footer{
  text-align:center;
  font-size:13px;
  color:#c7d2fe;
  margin-top:18px;
}
</style>
</head>

<body>

<div class="card">
  <div class="logo">ðŸ’¸ Expense Tracker</div>
  <div class="sub">Login to manage your expenses</div>

  <input id="email" type="email" placeholder="Email">

  <div class="wrap">
    <input id="password" type="password" placeholder="Password">
    <span class="toggle" onclick="togglePassword()">Show</span>
  </div>

  <div class="forgot" onclick="forgot()">Forgot password?</div>

  <button class="btn primary" id="loginBtn" onclick="login()">
    <span id="loginText">Login</span>
    <div class="spinner" id="spinner"></div>
  </button>

  <button class="btn secondary" onclick="signup()">Create Account</button>

  <div class="footer">Secure Â· Fast Â· Reliable</div>
</div>

<script type="module">
import { auth } from "./firebase.js";
import {
  signInWithEmailAndPassword,
  createUserWithEmailAndPassword,
  sendPasswordResetEmail
} from "https://www.gstatic.com/firebasejs/12.8.0/firebase-auth.js";

const email=document.getElementById("email");
const password=document.getElementById("password");
const spinner=document.getElementById("spinner");
const text=document.getElementById("loginText");
const btn=document.getElementById("loginBtn");

function start(){
  spinner.style.display="block";
  text.style.display="none";
  btn.disabled=true;
}
function stop(){
  spinner.style.display="none";
  text.style.display="inline";
  btn.disabled=false;
}

/* LOGIN */
window.login=async()=>{
  if(!email.value||!password.value)return alert("Fill all fields");
  start();
  try{
    await signInWithEmailAndPassword(auth,email.value,password.value);
    setTimeout(()=>location.href="dashboard.html",300);
  }catch(e){
    alert(e.message);
    stop();
  }
};

/* SIGNUP */
window.signup=async()=>{
  if(!email.value||!password.value)return alert("Fill all fields");
  start();
  try{
    await createUserWithEmailAndPassword(auth,email.value,password.value);
    setTimeout(()=>location.href="dashboard.html",300);
  }catch(e){
    alert(e.message);
    stop();
  }
};

/* SHOW / HIDE */
window.togglePassword=()=>{
  password.type=password.type==="password"?"text":"password";
};

/* FORGOT */
window.forgot=async()=>{
  if(!email.value)return alert("Enter email first");
  await sendPasswordResetEmail(auth,email.value);
  alert("Password reset email sent ðŸ“©");
};
</script>

</body>
</html>
